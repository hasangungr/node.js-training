extends ../layouts/main-layouts.pug 

block content 

    if(action !== 'undefined' && action  === 'edit'  )
        div.alert.alert-success The #{id} has been updated


    if(action !== 'undefined' && action  === 'delete'  )
        div.alert.alert-danger The #{id} has been deleted

    if products.length > 0 
        table.table.table-bordered
            thead
                tr
                    th Image 
                    th Product Name 
                    th Price 
                    th Quantity 
                    th Description
            tbody
                each product in products
                    tr
                        td
                            img(src=`/img/${product.imageUrl}` width = 80)
                        td #{product.name}
                        td #{product.price} TL
                        td #{product.cartItem.quantity} 
                        td #{product.description} 
                        td
                            

                            form(action='/delete-cartitem' method='POST')
                                input(type = 'hidden' name='productid' value= `${product.id}`)

                                button(type= 'Submit').btn.btn-danger.btn-sm Delete

            tfoot
                td(colspan="4")
                    - var total = 0;
                    each product in products
                        - total += product.price * product.cartItem.quantity
                td #{total} TL



        .text-center
            a(href="/").btn.btn-primary.mr-12 Continue
            form(action="/create-order" method= "POST")
                button(type="submit").btn.btn-secondary.ml-12 Completed

    else
        h1 No Products                      
    

